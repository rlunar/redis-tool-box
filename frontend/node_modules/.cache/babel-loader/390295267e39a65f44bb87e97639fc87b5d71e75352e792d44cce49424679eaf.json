{"ast":null,"code":"var _jsxFileName = \"/home/y4n/React_Apps/tool-box/frontend/src/components/Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SEAT_PRICE = 5; // $5 per seat\n\nfunction Cart() {\n  _s();\n  const [cart, setCart] = useState({});\n  const [selectedSeats, setSelectedSeats] = useState([]);\n  const [newlySelectedSeats, setNewlySelectedSeats] = useState([]);\n  useEffect(() => {\n    fetchCart();\n    fetchSelectedSeats();\n  }, []);\n  const fetchSelectedSeats = () => {\n    axios.get('http://localhost:3001/seating').then(response => {\n      const bitmap = response.data.bitmap;\n      const selected = Array.from(bitmap.toString(2).matchAll(/1/g), m => 'A' + (m.index + 1));\n      setSelectedSeats(selected);\n    }).catch(() => alert(\"Error fetching the selected seats.\"));\n  };\n  const fetchCart = () => {\n    axios.get('http://localhost:3001/cart').then(response => {\n      setCart(response.data.cart);\n    }).catch(() => alert(\"Error fetching the cart.\"));\n  };\n  const handleSeatSelect = seat => {\n    if (newlySelectedSeats.includes(seat)) {\n      setNewlySelectedSeats(prevSeats => prevSeats.filter(s => s !== seat));\n    } else {\n      setNewlySelectedSeats(prevSeats => [...prevSeats, seat]);\n    }\n  };\n  const addToCart = () => {\n    console.log(\"Sending these seats to server:\", newlySelectedSeats);\n    axios.post('http://localhost:3001/addToCart', {\n      selectedSeats: newlySelectedSeats\n    }).then(response => {\n      if (response.data.success) {\n        fetchCart();\n        fetchSelectedSeats();\n        setNewlySelectedSeats([]);\n      } else {\n        alert(response.data.error);\n      }\n    }).catch(error => {\n      console.error('Error while communicating with the server:', error.response ? error.response.data : error.message);\n      alert(\"Error adding to the cart.\");\n    });\n  };\n  const clearCart = () => {\n    axios.post('http://localhost:3001/clearCart').then(response => {\n      if (response.data.success) {\n        fetchCart();\n      }\n    }).catch(() => alert(\"Error clearing the cart.\"));\n  };\n  const removeSeat = seatIndex => {\n    axios.post(`http://localhost:3001/removeFromCart`, {\n      seat: seatIndex\n    }).then(response => {\n      if (response.data.success) {\n        fetchCart();\n      }\n    }).catch(() => alert(\"Error removing the seat from the cart.\"));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleSeatSelect('A1'),\n      children: \"A1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addToCart,\n        children: \"Add to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: Object.entries(cart).map(([seatPosition, count]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Seat \", seatPosition, \": \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [count, \" x $\", SEAT_PRICE, \" = $\", count * SEAT_PRICE]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeSeat(seatPosition),\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this)]\n      }, seatPosition, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Total: $\", Object.values(cart).reduce((acc, count) => acc + count * SEAT_PRICE, 0)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearCart,\n        children: \"Clear Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n}\n_s(Cart, \"mn81UmZ7jcsBWi9rTInr6ENM9/4=\");\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","SEAT_PRICE","Cart","_s","cart","setCart","selectedSeats","setSelectedSeats","newlySelectedSeats","setNewlySelectedSeats","fetchCart","fetchSelectedSeats","get","then","response","bitmap","data","selected","Array","from","toString","matchAll","m","index","catch","alert","handleSeatSelect","seat","includes","prevSeats","filter","s","addToCart","console","log","post","success","error","message","clearCart","removeSeat","seatIndex","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","seatPosition","count","values","reduce","acc","_c","$RefreshReg$"],"sources":["/home/y4n/React_Apps/tool-box/frontend/src/components/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst SEAT_PRICE = 5; // $5 per seat\n\nfunction Cart() {\n    const [cart, setCart] = useState({});\n    const [selectedSeats, setSelectedSeats] = useState([]);\n    const [newlySelectedSeats, setNewlySelectedSeats] = useState([]);\n\n    useEffect(() => {\n        fetchCart();\n        fetchSelectedSeats();\n    }, []);\n\n    const fetchSelectedSeats = () => {\n        axios.get('http://localhost:3001/seating')\n            .then(response => {\n                const bitmap = response.data.bitmap;\n                const selected = Array.from(bitmap.toString(2).matchAll(/1/g), m => 'A' + (m.index + 1));\n                setSelectedSeats(selected);\n            })\n            .catch(() => alert(\"Error fetching the selected seats.\"));\n    };\n\n    const fetchCart = () => {\n        axios.get('http://localhost:3001/cart')\n            .then(response => {\n                setCart(response.data.cart);\n            })\n            .catch(() => alert(\"Error fetching the cart.\"));\n    };\n\n    const handleSeatSelect = (seat) => {\n        if (newlySelectedSeats.includes(seat)) {\n            setNewlySelectedSeats(prevSeats => prevSeats.filter(s => s !== seat));\n        } else {\n            setNewlySelectedSeats(prevSeats => [...prevSeats, seat]);\n        }\n    };\n\n    const addToCart = () => {\n        console.log(\"Sending these seats to server:\", newlySelectedSeats);\n        axios.post('http://localhost:3001/addToCart', { selectedSeats: newlySelectedSeats })\n            .then(response => {\n                if (response.data.success) {\n                    fetchCart();\n                    fetchSelectedSeats();\n                    setNewlySelectedSeats([]);\n                } else {\n                    alert(response.data.error);\n                }\n            })\n            .catch(error => {\n                console.error('Error while communicating with the server:', error.response ? error.response.data : error.message);\n                alert(\"Error adding to the cart.\");\n            });\n    };\n\n    const clearCart = () => {\n        axios.post('http://localhost:3001/clearCart')\n            .then(response => {\n                if (response.data.success) {\n                    fetchCart();\n                }\n            })\n            .catch(() => alert(\"Error clearing the cart.\"));\n    };\n\n    const removeSeat = (seatIndex) => {\n        axios.post(`http://localhost:3001/removeFromCart`, { seat: seatIndex })\n            .then(response => {\n                if (response.data.success) {\n                    fetchCart();\n                }\n            })\n            .catch(() => alert(\"Error removing the seat from the cart.\"));\n    };\n\n    return (\n        <div>\n            {/* Presumably somewhere here, you should also render seat buttons or seat representation that uses handleSeatSelect function */}\n            {/* Example: */}\n            <button onClick={() => handleSeatSelect('A1')}>A1</button>\n            {/* Add more buttons for other seats similarly. */}\n            \n            {/* Add to Cart Button */}\n            <div>\n                <button onClick={addToCart}>Add to Cart</button>\n            </div>\n\n            {/* Cart Representation */}\n            <div>\n                {Object.entries(cart).map(([seatPosition, count]) => (\n                    <div key={seatPosition}>\n                        <span>Seat {seatPosition}: </span>\n                        <span>{count} x ${SEAT_PRICE} = ${count * SEAT_PRICE}</span>\n                        <button onClick={() => removeSeat(seatPosition)}>Remove</button>\n                    </div>\n                ))}\n            </div>\n\n            {/* Cart Total */}\n            <div>\n                Total: ${Object.values(cart).reduce((acc, count) => acc + count * SEAT_PRICE, 0)}\n            </div>\n\n            {/* Clear Cart Button */}\n            <div>\n                <button onClick={clearCart}>Clear Cart</button>\n            </div>\n        </div>\n    );\n}\n\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}